var ie=new WeakMap;function he(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null,r=e?e.closest("input, button"):null;return(r==null?void 0:r.type)=="submit"?r:null}function pe(t){const e=he(t.target);e&&e.form&&ie.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let t=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))t=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",pe,!0),Object.defineProperty(t,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return ie.get(this.target)}})})();(function(t){if(typeof t.requestSubmit=="function")return;t.requestSubmit=function(n){n?(e(n,this),n.click()):(n=document.createElement("input"),n.type="submit",n.hidden=!0,this.appendChild(n),n.click(),this.removeChild(n))};function e(n,i){n instanceof HTMLElement||r(TypeError,"parameter 1 is not of type 'HTMLElement'"),n.type=="submit"||r(TypeError,"The specified element is not a submit button"),n.form==i||r(DOMException,"The specified element is not owned by this form element","NotFoundError")}function r(n,i,f){throw new n("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+i+".",f)}})(HTMLFormElement.prototype);var O={};async function me({method:t,action:e,body:r,referrer:n,headers:i},f){let a,d=ge(f),u=y=>y,w=y=>y;if(t==="GET"){if(a=we(e),be(e))return a;u=y=>z(e,E=>E.resolve(y)),w=y=>z(e,E=>E.reject(y))}n=n||window.location.href;let m=fetch(e,{headers:i,referrer:n,method:t,body:r}).then(d).then(ye).then(u).catch(w);return t==="GET"?a:m}function ye(t){return t.text().then(e=>(t.html=e,t))}function we(t){O[t]||(O[t]=[]);let e={},r=new Promise((n,i)=>{e.resolve=n,e.reject=i});return O[t].push(e),r}function be(t){return O[t].length>1}function z(t,e){(O[t]||[]).forEach(e),O[t]=void 0}function ge(t){return t?e=>e:e=>{if(e.redirected){window.location.href=e.url;return}return e}}function W(t,e,r){xe();let n,i,f,a,d,u,w,m,y;function E(o={}){let s=b=>b.getAttribute("key"),c=()=>{};a=o.updating||c,d=o.updated||c,u=o.removing||c,w=o.removed||c,m=o.adding||c,y=o.added||c,i=o.key||s,f=o.lookahead||!1}function v(o,s){if(C(o,s))return B(o,s);let c=!1;if(!L(a,o,s,()=>c=!0)){if(o.nodeType===1&&window.Alpine&&window.Alpine.cloneNode(o,s),Ee(s)){M(o,s),d(o,s);return}c||F(o,s),d(o,s),_(o,s)}}function C(o,s){return o.nodeType!=s.nodeType||o.nodeName!=s.nodeName||A(o)!=A(s)}function B(o,s){if(L(u,o))return;let c=s.cloneNode(!0);L(m,c)||(o.replaceWith(c),w(o),y(c))}function M(o,s){let c=s.nodeValue;o.nodeValue!==c&&(o.nodeValue=c)}function F(o,s){if(o._x_transitioning||o._x_isShown&&!s._x_isShown||!o._x_isShown&&s._x_isShown)return;let c=Array.from(o.attributes),b=Array.from(s.attributes);for(let h=c.length-1;h>=0;h--){let l=c[h].name;s.hasAttribute(l)||o.removeAttribute(l)}for(let h=b.length-1;h>=0;h--){let l=b[h].name,N=b[h].value;o.getAttribute(l)!==N&&o.setAttribute(l,N)}}function _(o,s){let c=H(o.children),b={},h=Y(s),l=Y(o);for(;h;){let g=A(h),k=A(l);if(!l)if(g&&b[g]){let p=b[g];o.appendChild(p),l=p}else{if(!L(m,h)){let p=h.cloneNode(!0);o.appendChild(p),y(p)}h=x(s,h);continue}let R=p=>p&&p.nodeType===8&&p.textContent===" __BLOCK__ ",D=p=>p&&p.nodeType===8&&p.textContent===" __ENDBLOCK__ ";if(R(h)&&R(l)){let p=0,I=l;for(;l;){let T=x(o,l);if(R(T))p++;else if(D(T)&&p>0)p--;else if(D(T)&&p===0){l=T;break}l=T}let le=l;p=0;let ue=h;for(;h;){let T=x(s,h);if(R(T))p++;else if(D(T)&&p>0)p--;else if(D(T)&&p===0){h=T;break}h=T}let de=h,ce=new q(I,le),fe=new q(ue,de);_(ce,fe);continue}if(l.nodeType===1&&f&&!l.isEqualNode(h)){let p=x(s,h),I=!1;for(;!I&&p;)p.nodeType===1&&l.isEqualNode(p)&&(I=!0,l=S(o,h,l),k=A(l)),p=x(s,p)}if(g!==k){if(!g&&k){b[k]=l,l=S(o,h,l),b[k].remove(),l=x(o,l),h=x(s,h);continue}if(g&&!k&&c[g]&&(l.replaceWith(c[g]),l=c[g]),g&&k){let p=c[g];if(p)b[k]=l,l.replaceWith(p),l=p;else{b[k]=l,l=S(o,h,l),b[k].remove(),l=x(o,l),h=x(s,h);continue}}}let se=l&&x(o,l);v(l,h),h=h&&x(s,h),l=se}let N=[];for(;l;)L(u,l)||N.push(l),l=x(o,l);for(;N.length;){let g=N.shift();g.remove(),w(g)}}function A(o){return o&&o.nodeType===1&&i(o)}function H(o){let s={};for(let c of o){let b=A(c);b&&(s[b]=c)}return s}function S(o,s,c){if(!L(m,s)){let b=s.cloneNode(!0);return o.insertBefore(b,c),y(b),b}return s}return E(r),n=typeof e=="string"?ve(e):e,window.Alpine&&window.Alpine.closestDataStack&&!t._x_dataStack&&(n._x_dataStack=window.Alpine.closestDataStack(t),n._x_dataStack&&window.Alpine.cloneNode(t,n)),v(t,n),n=void 0,t}W.step=()=>{};W.log=()=>{};function L(t,...e){let r=!1;return t(...e,()=>r=!0),r}var Q=!1;function ve(t){const e=document.createElement("template");return e.innerHTML=t,e.content.firstElementChild}function Ee(t){return t.nodeType===3||t.nodeType===8}var q=class{constructor(t,e){this.startComment=t,this.endComment=e}get children(){let t=[],e=this.startComment.nextSibling;for(;e!==void 0&&e!==this.endComment;)t.push(e),e=e.nextSibling;return t}appendChild(t){this.endComment.before(t)}get firstChild(){let t=this.startComment.nextSibling;if(t!==this.endComment)return t}nextNode(t){let e=t.nextSibling;if(e!==this.endComment)return e}insertBefore(t,e){return e.before(t),t}};function Y(t){return t.firstChild}function x(t,e){if(e._x_teleport)return e._x_teleport;if(e.teleportBack)return e.teleportBack;let r;return t instanceof q?r=t.nextNode(e):r=e.nextSibling,r}function xe(){if(Q)return;Q=!0;let t=Element.prototype.setAttribute,e=document.createElement("div");Element.prototype.setAttribute=function(n,i){if(!n.includes("@"))return t.call(this,n,i);e.innerHTML=`<span ${n}="${i}"></span>`;let f=e.firstElementChild.getAttributeNode(n);e.firstElementChild.removeAttributeNode(f),this.setAttributeNode(f)}}var j={followRedirects:!0,mergeStrategy:"replace"},Z=new WeakMap,$=new WeakMap;function P(t){window.addEventListener("popstate",e=>{!e.state||!e.state.__AJAX__||window.location.reload(!0)}),t.directive("target",(e,{modifiers:r,expression:n},{evaluate:i,cleanup:f})=>{let a={targets:ee(e,n),events:!0,...Ce(r)};Z.set(e,a),a.headers=i(t.bound(e,"x-headers","{}")),Ae(e)?f(_e(e,a)):Se(e)&&f(Le(e,a))}),t.addInitSelector(()=>`[${t.prefixed("merge")}]`),t.directive("merge",(e,{modifiers:r,expression:n})=>{$.set(e,{strategy:n,transition:ke(r)})}),t.magic("ajax",e=>(r,n={})=>{let i=n.method?n.method.toUpperCase():"GET",f=null;if(n.body){if(n.body instanceof HTMLFormElement)f=new FormData(n.body);else{f=new FormData;for(let y in n.body)f.append(y,n.body[y])}i==="GET"&&(r=oe(f,r),f=null)}let a=n.headers;a||(a=e.hasAttribute("x-headers")?t.evaluate(e,t.bound(e,"x-headers","{}")):{});let d={action:r,method:i,body:f,headers:a,referrer:J(e)};console.log(d);let u=Z.get(e)||{followRedirects:j.followRedirects,history:!1};u=Object.assign(u,n);let w=ee(e,u.targets||u.target),m=V(w);return m=u.sync?X(m):m,G(d,m,e,u)})}P.configure=t=>(j=Object.assign(j,t),P);var Te=P;function ee(t,e=null){let r=[t.id];if(e&&(r=Array.isArray(e)?e:e.split(" ")),r=r.filter(n=>n),r.length===0)throw new ae(t);return r}function Ce(t=[]){let e=j.followRedirects?!t.includes("nofollow"):t.includes("follow"),r=!1;return t.includes("push")&&(r="push"),t.includes("replace")&&(r="replace"),{followRedirects:e,history:r}}function ke(t=[]){return j.transitions||t.includes("transition")}function Ae(t){return t.href&&!t.hash&&t.origin==location.origin}function Se(t){return t.tagName==="FORM"}function _e(t,e){let r=async n=>{n.preventDefault(),n.stopPropagation();let i=Ne(t);i.headers=e.headers||{};let f=X(V(e.targets));try{return await G(i,f,t,e)}catch(a){if(a instanceof U){console.warn(a.message),window.location.href=t.href;return}throw a}};return t.addEventListener("click",r),()=>t.removeEventListener("click",r)}function Ne(t){return{method:"GET",action:t.href,referrer:J(t),body:null}}function Le(t,e){let r=async n=>{if(n.submitter&&n.submitter.hasAttribute("formnoajax"))return;n.preventDefault(),n.stopPropagation();let i=Oe(t,n.submitter);i.headers=e.headers||{};let f=X(V(e.targets));try{return await je(n.submitter,()=>G(i,f,t,e))}catch(a){if(a instanceof U){console.warn(a.message),t.removeEventListener("submit",r),t.requestSubmit(n.submitter);return}throw a}};return t.addEventListener("submit",r),()=>t.removeEventListener("submit",r)}function Oe(t,e=null){let r=(t.getAttribute("method")||"GET").toUpperCase(),n=J(t),i=t.getAttribute("action")||n||window.location.href,f=new FormData(t);return e&&e.name&&f.append(e.name,e.value),r==="GET"&&(i=oe(f,i),f=null),{method:r,action:i,body:f,referrer:n}}async function je(t,e){if(!t)return await e();let r=i=>i.preventDefault();t.setAttribute("aria-disabled","true"),t.addEventListener("click",r);let n=await e();return t.removeAttribute("aria-disabled"),t.removeEventListener("click",r),n}function oe(t,e){let r=Array.from(t.entries()).filter(([n,i])=>i!==""||i!==null);if(r.length){let n=e.split("#"),i=n[1];n=n[0].split("?"),e=n[0]+"?"+new URLSearchParams(r),i&&(e+="#"+i)}return e}async function G(t,e,r,n){let i=()=>!0;if(n.events&&(i=(m,y,E)=>m.dispatchEvent(new CustomEvent(y,{detail:E,bubbles:!0,composed:!0,cancelable:!0}))),!i(r,"ajax:before"))return;let f=[];e.forEach(m=>{m.setAttribute("aria-busy","true"),f.push(m.id)}),t.headers["X-Alpine-Request"]="true",t.headers["X-Alpine-Target"]=f.join("  ");let a=await me(t,n.followRedirects);if(a.ok?i(r,"ajax:success",a):i(r,"ajax:error",a),i(r,"ajax:after",a),!a.html)return;let d=document.createRange().createContextualFragment(a.html),u=e.map(async m=>{var C;let y=d.getElementById(m.id),E=((C=$.get(m))==null?void 0:C.strategy)||j.mergeStrategy;if(!y){if(!i(r,"ajax:missing",a))return;if(m.hasAttribute("x-sync")||console.warn(`Target #${m.id} not found in AJAX response.`),a.ok)return await te(E,m,m.cloneNode(!1));throw new U(r)}let v=await te(E,m,y);return v&&(v.removeAttribute("aria-busy"),v.dataset.source=a.url),v});e=await Promise.all(u);let w=r.getAttribute("x-focus");return w&&Fe(document.getElementById(w)),n.history&&Be(n.history,a.url),e}async function te(t,e,r){var a;let n={before(d,u){return d.before(...u.childNodes),d},replace(d,u){return d.replaceWith(u),u},update(d,u){return d.replaceChildren(...u.childNodes),d},prepend(d,u){return d.prepend(...u.childNodes),d},append(d,u){return d.append(...u.childNodes),d},after(d,u){return d.after(...u.childNodes),d},morph(d,u){return W(d,u),document.getElementById(u.id)}};if(!((a=$.get(e))!=null&&a.transition)||!document.startViewTransition)return n[t](e,r);let i=null;return await document.startViewTransition(()=>(i=n[t](e,r),Promise.resolve())).updateCallbackDone,i}function Fe(t){t&&setTimeout(()=>{t.hasAttribute("tabindex")||t.setAttribute("tabindex","0"),t.focus()},0)}function Be(t,e){return{push:()=>window.history.pushState({__AJAX__:!0},"",e),replace:()=>window.history.replaceState({__AJAX__:!0},"",e)}[t]()}function V(t=[]){return t.map(e=>{let r=document.getElementById(e);if(!r)throw new Me(e);return r})}function X(t){return document.querySelectorAll("[x-sync]").forEach(e=>{if(!e.id)throw new ae(e);t.some(r=>r.id===e.id)||t.push(e)}),t}function J(t){var e;return(e=t.closest("[data-source]"))==null?void 0:e.dataset.source}var ae=class extends Error{constructor(t){let e=(t.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${e} is missing an ID to target.`),this.name="Missing ID"}},Me=class extends Error{constructor(t){super(`#${t} was not found in the current document.`),this.name="Missing Target"}},U=class extends Error{constructor(t){let e=(t.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${e} received a failed response.`),this.name="Failed Response"}},We=Te;async function Re(t,e){const r=t.getReader();let n;for(;!(n=await r.read()).done;)e(n.value)}function De(t){let e,r,n,i=!1;return function(a){e===void 0?(e=a,r=0,n=-1):e=He(e,a);const d=e.length;let u=0;for(;r<d;){i&&(e[r]===10&&(u=++r),i=!1);let w=-1;for(;r<d&&w===-1;++r)switch(e[r]){case 58:n===-1&&(n=r-u);break;case 13:i=!0;case 10:w=r;break}if(w===-1)break;t(e.subarray(u,w),n),u=r,n=-1}u===d?e=void 0:u!==0&&(e=e.subarray(u),r-=u)}}function Ie(t,e,r){let n=ne();const i=new TextDecoder;return function(a,d){if(a.length===0)r==null||r(n),n=ne();else if(d>0){const u=i.decode(a.subarray(0,d)),w=d+(a[d+1]===32?2:1),m=i.decode(a.subarray(w));switch(u){case"data":n.data=n.data?n.data+`
`+m:m;break;case"event":n.event=m;break;case"id":t(n.id=m);break;case"retry":const y=parseInt(m,10);isNaN(y)||e(n.retry=y);break}}}}function He(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function ne(){return{data:"",event:"",id:"",retry:void 0}}var qe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const K="text/event-stream",Pe=1e3,re="last-event-id";function $e(t,e){var{signal:r,headers:n,onopen:i,onmessage:f,onclose:a,onerror:d,openWhenHidden:u,fetch:w}=e,m=qe(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((y,E)=>{const v=Object.assign({},n);v.accept||(v.accept=K);let C;function B(){C.abort(),document.hidden||S()}u||document.addEventListener("visibilitychange",B);let M=Pe,F=0;function _(){document.removeEventListener("visibilitychange",B),window.clearTimeout(F),C.abort()}r==null||r.addEventListener("abort",()=>{_(),y()});const A=w??window.fetch,H=i??Ke;async function S(){var o;C=new AbortController;try{const s=await A(t,Object.assign(Object.assign({},m),{headers:v,signal:C.signal}));await H(s),await Re(s.body,De(Ie(c=>{c?v[re]=c:delete v[re]},c=>{M=c},f))),a==null||a(),_(),y()}catch(s){if(!C.signal.aborted)try{const c=(o=d==null?void 0:d(s))!==null&&o!==void 0?o:M;window.clearTimeout(F),F=window.setTimeout(S,c)}catch(c){_(),E(c)}}}S()})}function Ke(t){const e=t.headers.get("content-type");if(!(e!=null&&e.startsWith(K)))throw new Error(`Expected content-type to be ${K}, Actual: ${e}`)}function Ge(t={text:null,message:"Copied!"}){return{onClipboard:!1,text:t.text,message:t.message||"Copied!",init(){this.message=this.$el.dataset.message||this.message},clipboard:{"@click"(){this.onClipboardClick()}},copy(){let e=this.text;typeof e=="function"&&(e=e()),typeof e=="object"&&(e=JSON.stringify(e));let r=()=>{setTimeout(()=>{this.onClipboard=!1},500)};window.navigator.clipboard.writeText(e).then(r),window.toastr.info(this.message)},onClipboardClick(){this.onClipboard=!0,this.copy()}}}export{Ge as c,$e as f,We as m};
